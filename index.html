<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
</head>
<body>
<div id="loading-page"></div>

<div id="main-page">
    <div class="top-row">
        <div class="wrapper">
            <video class="choreo" muted loop>
                <source src="choreo/Owen.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop>
                <source src="choreo/Christina.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop style="margin-top: -34%;">
                <source src="choreo/Jon.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop>
                <source src="choreo/Stephane.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop style="margin-top: -34%;">
                <source src="choreo/Rui.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop>
                <source src="choreo/Freddy.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop style="margin-top: -5%;">
                <source src="choreo/Kristie.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop>
                <source src="choreo/Nicole.webm" type="video/mp4">
            </video>
        </div>
    </div>

    <div class="middle-row">
        <div class="left-col">
            <div class="wrapper">
                <video class="choreo" muted loop>
                    <source src="choreo/Michael.webm" type="video/mp4">
                </video>
            </div>
            <div class="wrapper">
                <video class="choreo" muted loop style="margin-top: 0%;">
                    <source src="choreo/Bonnie.webm" type="video/mp4">
                </video>
            </div>
        </div>
        <div class="center-col">
            <video id="center-video" controls muted>
                <source src="choreo.webm" type="video/mp4">
            </video>
        </div>
        <div class="right-col">
            <div class="wrapper">
                <video class="choreo" muted loop>
                    <source src="choreo/John.webm" type="video/mp4">
                </video>
            </div>
            <div class="wrapper">
                <video class="choreo" muted loop>
                    <source src="choreo/Xuehai.webm" type="video/mp4">
                </video>
            </div>
        </div>
    </div>

    <div class="bottom-row">
        <div class="wrapper">
            <video class="choreo" muted loop style="margin-top: -34%;">
                <source src="choreo/Tommy.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop style="margin-top: -5%;">
                <source src="choreo/Sarah.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop style="margin-top: 0%; margin-left: -192px;">
                <source src="choreo/Rox.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop style="margin-top: -25%;">
                <source src="choreo/Sandy.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop>
                <source src="choreo/Stella.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop style="margin-top: -34%";>
                <source src="choreo/Val.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop style="margin-top: 0%; margin-left: -188px;">
                <source src="choreo/Chris.webm" type="video/mp4">
            </video>
        </div>
        <div class="wrapper">
            <video class="choreo" muted loop>
                <source src="choreo/Celia.webm" type="video/mp4">
            </video>
        </div>
    </div>
</div>

<div id="birthday-page">
    <div class="top-row">
        <video class="thumbnail" id="slowest-thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
    </div>
    
    <div class="bottom-row">
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
        <video class="thumbnail" muted>
            <source src="birthday.webm" type="video/mp4">
        </video>
    </div>
</div>

<div id="overlay">
    <img src="replay.png" onClick="window.location.reload();"/>
</div>

<script type="text/javascript">
  var $choreo = $('.choreo');
  var loadedCount = 0;

  $choreo.each(function(i) {
    this.addEventListener('loadeddata', function() {
      loadedCount++;

      if (loadedCount === 20) {
        whenLoaded();
      }
    }, false);
  });

  function whenLoaded() {
    $("#loading-page").fadeOut("slow");

    $choreo.each(function(i) {
      this.play();
    });

    document.getElementById('center-video').play();
  }

    document.getElementById('center-video').addEventListener('ended', showBirthday, false);
    function showBirthday(e) {
        $("#main-page").fadeOut("fast");
        $("#birthday-page").fadeIn("slow");
        var videos = document.getElementsByClassName('thumbnail');
        for (var i = 0; i < videos.length; i++) {
            videos.item(i).play();
        }
    }

    document.getElementById('slowest-thumbnail').addEventListener('ended', showReplay, false);
    function showReplay(e) {
        $("#overlay").fadeIn("slow");
    }
</script>
</body>
</html>
